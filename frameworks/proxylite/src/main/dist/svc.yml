name: "proxylite"
principal: "proxylite-principal"
zookeeper: master.mesos:2181
web-url: http://proxylite-0-server.proxylite.mesos:4040
api-port: {{PORT0}}
pods:
  web:
    container:
      image-name: ubuntu:14.04
    count: 1
    tasks:
      server:
        goal: RUNNING
        cmd: "echo $PORT_HTTPD && python3 -m http.server $PORT_HTTPD"
        cpus: {{PROXY_LITE_CPUS}}
        memory: {{PROXY_LITE_MEM}}
        ports:
         - name: HTTPD
           port: 4041
  proxylite:
    container:
      image-name: nlsun/proxylite:0.0.1 # Put this in the real Mesosphere account
    count: 1
    tasks:
      server:
        goal: RUNNING
        cmd: "/proxylite/run.sh"
        cpus: {{PROXY_LITE_CPUS}}
        memory: {{PROXY_LITE_MEM}}
        ports:
         - name: PROXYLITE
           port: 4040
        env:
          EXTERNAL_ROUTES: "/v1,/httpd,/google,/example"
          INTERNAL_ROUTES: "proxylite.marathon.mesos:{{PORT0}}/v1,web-0-server.proxylite.mesos:4041,google.com:80,example.com:80"

